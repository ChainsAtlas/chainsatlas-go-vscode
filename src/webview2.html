<!-- Test: npx http-server -->

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <w3m-core-button></w3m-core-button>
    <script type="module">
      import {
        EthereumClient,
        w3mConnectors,
        w3mProvider,
        WagmiCore,
        WagmiCoreChains,
        WagmiCoreConnectors,
      } from "https://unpkg.com/@web3modal/ethereum@2.6.2";

      import { Web3Modal } from "https://unpkg.com/@web3modal/html@2.6.2";

      // 0. Import wagmi dependencies
      const { mainnet, polygon, avalanche, arbitrum } = WagmiCoreChains;
      const { configureChains, createConfig } = WagmiCore;

      // 1. Define chains
      const chains = [mainnet, polygon, avalanche, arbitrum];
      const projectId = "7b1ecd906a131e3a323a225589f75287";

      // 2. Configure wagmi client
      const { publicClient } = configureChains(chains, [
        w3mProvider({ projectId }),
      ]);
      const wagmiConfig = createConfig({
        autoConnect: true,
        connectors: [
          ...w3mConnectors({ chains, version: 2, projectId }),
          new WagmiCoreConnectors.CoinbaseWalletConnector({
            chains,
            options: {
              appName: "html wagmi example",
            },
          }),
        ],
        publicClient,
      });

      // 3. Create ethereum and modal clients
      const ethereumClient = new EthereumClient(wagmiConfig, chains);
      export const web3Modal = new Web3Modal(
        {
          projectId,
          walletImages: {
            safe: "https://pbs.twimg.com/profile_images/1566773491764023297/IvmCdGnM_400x400.jpg",
          },
        },
        ethereumClient,
      );
    </script>
  </body>
</html>
